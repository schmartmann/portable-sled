"use strict";function InitSled(){function die(e){Analytics.fatal(e),win.removeEventListener("blur",Utils.windowBlur),win.removeEventListener("focus",Utils.windowFocus),delete window.Sled}function loadWaterfall(e){Loader.waterfall(settings.ads,settings,function(t,n){return t?e(t):(Sled.ad=n,state.timesAdSeen=+Utils.cookieRead("sledImp"+Sled.ad.id)||0,state.timesSledSeen=+Utils.cookieRead("sledImpTotal")||0,Loader=settings.ad=settings.ads=null,void e())})}function loadEngine(e){function t(){state.loadSpeed=Date.now()-timer,e()}var n=doc.createElement("script");n.src="js/engine.js",n.id="sledScriptTag",n.onload=t,n.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&t()},n.onerror=function(){e(new Utils.SledError("LoadError","failedToLoadEngine"))},doc.head.appendChild(n)}function initEngine(){Sled.engine=new Sled.EngineLoader(Sled,Analytics,Network,Utils,settings),Sled.EngineLoader=null}var settings={ads:[{id:"ad",format:"ad"}],analyticsURL:"http://b.sledmobile.com",isATest:!0,engVersion:"9.32.0"},win=window.top,doc=win.document,timer=Date.now();if(win.Sled)return win.Sled.state.tagCount++,void win.Sled.Analytics.generic("tagCount-"+win.Sled.state.tagCount);"localhost"===settings.server&&(settings.sledURL="http://"+window.location.host);var Sled;win.Sled=Sled={adJSLoaded:null,adJSFailed:null,ad:null,Analytics:null,engine:null,external:{loaded:function(){Sled.settings.externalLoaded=!0,Sled.engine.adJSLoaded()}},Network:null,plugins:{},state:{tagCount:1,loadSpeed:null,initSpeed:null,frames:0,frameT:0,viewable50:0,viewable50Continuous:0,viewable100:0,moatViewableFunction:function(){return null},moatMaxT:0,lastFrame:0,scrollPosition:0,scrollPositionT:Date.now(),percentInView:0,viewHeight:win.screen.availHeight,viewWidth:win.screen.availWidth,viewTop:0,viewBottom:0,focused:!0,hasClicked:!1,gestures:0,frozenGestures:0,active:!1,firstGesture:!0,swiping:!1,scrolling:!1,host:encodeURIComponent(win.location.hostname.slice(0,255)),referrer:encodeURIComponent(doc.referrer.slice(0,255)),page:encodeURIComponent(win.location.href.slice(0,255)),title:encodeURIComponent(document.title.slice(0,255)),language:(win.navigator.userLanguage||win.navigator.language).toLowerCase(),timesAdSeen:0,timesSledSeen:0},settings:null,Utils:null};try{!function(e){function t(t,n,i,r){function o(o){a||(a=!0,clearTimeout(s),e.waterfall(t.slice(1),n,i,function(e,t){return e?(e.message=o.message+"->"+e.message,r(e)):void r(null,t)}))}if(0===t.length)return r({name:"endOfWaterfall",message:"endOfWaterfall"});var a=!1,s=setTimeout(function(){o(new Error("timeout"))},i);n(t[0],function(e,t){if(!a){if(e)return void o(e);a=!0,clearTimeout(s),r(null,t)}})}function n(t,n,i){switch(i=i.toLowerCase()){case"random":return e.random;case"timestamp":return e.timestamp;case"player_width":case"player_height":return Sled.state.viewWidth;case"media_id":case"media_title":return Sled.state.title;case"description_url":return Sled.state.page;case"media_url":case"source_page_url":case"hard_code_url":return Sled.state.host;case"referrer_url":return Sled.state.referrer;case"publisher":return Sled.settings.metadata?Sled.settings.metadata.publisher:"";default:return Sled.settings.debug&&new e.SledError("UnknownMacro",t),t}}var i=null;"undefined"!=typeof DOMParser?i=new DOMParser:console.log("No DOM Parser available"),e.SledError=function(e,t,n){n=n||{},this.name=e||"SledError",this.message=t||"Sled Error",this.stack=(new Error).stack,console.dir(this),Sled&&Sled.Analytics&&n.alert!==!1&&Sled.Analytics.error(this)},e.SledError.prototype=Object.create(Error.prototype),e.SledError.prototype.constructor=e.SledError,e.async=function(t,n){function i(e,t){a.push(e),t(function(t,n){r(e,t,n)})}function r(i,r,o){var l=a.indexOf(i);-1!==l&&(a.splice(l,1),s||(r?(s=!0,n(r)):a.length>0||(t.length>0?e.async(t,n):n())))}for(var o=[].concat(t.shift()),a=[],s=!1,l=0,d=o.length;d>l;l++)i(l,o[l])},e.waterfall=function(e,n,i,r){1===e.length&&(i=6e4),t(e,n,i,r)},e.parseXml=function(e,t){try{t(null,i.parseFromString(e,"text/xml"))}catch(n){n.name="XmlParserError",t(n)}},e.replaceMacros=function(e,t,i){try{var r;if(Array.isArray(e)){r=[];for(var o=0,a=e.length;a>o;o++)r[o]=e[o].replace(/\$?(\[|\{|(?:%5b))(.*?)(\]|\}|(?:%5d))/g,n)}else r=e.replace(/\$?(\[|\{|(?:%5b))(.*?)(\]|\}|(?:%5d))/g,n);return i(null,r)}catch(s){return s.name="ReplaceMacroError",s.message=t+": "+s.message,i(s)}},e.timestamp=Date.now(),e.random=~~(1e8*Math.random()),e.getScrollPosition=function(){var e=Sled.state;if(Date.now()-e.scrollPositionT>=100){var t=settings.scrollElement||doc.documentElement;e.scrollPosition=~~t.scrollTop,e.scrollPositionT=Date.now()}return e.scrollPosition},e.getElementData=function(e){var t={};return[].forEach.call(e.attributes,function(e){/^data-/.test(e.name)&&(t[e.name.substr(5)]=e.value)}),t},e.getElementStyle=function(e,t){var n=(e.ownerDocument||doc).defaultView;return n&&n.getComputedStyle?n.getComputedStyle(e,null).getPropertyValue(t):void 0},e.getClosest=function(e,t){for(var n=t.charAt(0);e&&e!==document;e=e.parentNode){if("."===n&&e.classList.contains(t.substr(1)))return e;if("#"===n&&e.id===t.substr(1))return e;if("["===n&&e.hasAttribute(t.substr(1,t.length-2)))return e;if(e.tagName.toLowerCase()===t)return e}return!1},e.getViewHeight=function(){var e=Math.max(win.screen.availHeight,win.innerHeight,0);return e-settings.offsetTop-settings.offsetBottom},e.getAdPercentInView=function(){var t=0,n=Sled.state.adShift,i=Sled.ad.height;return settings.embedElement&&(state.viewTop=e.getScrollPosition(),Sled.state.adShift=Sled.ad.wrapper.getBoundingClientRect().top,n=Sled.state.adShift),n&&(t=n+i<state.viewHeight+settings.offsetTop&&n>settings.offsetTop?1:n+i>state.viewHeight+settings.offsetTop?(state.viewHeight+settings.offsetTop-n)/i:1+(n-settings.offsetTop)/i),~~(100*t)},e.preventDefault=function(e){e=e||win.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},e.cookieRead=function(e){for(var t=e+"=",n=doc.cookie.split(";"),i=0,r=n.length;r>i;i++){var o=n[i].trim();if(0===o.indexOf(t)){var a=o.substring(t.length,o.length);return isNaN(a)?a:+a}}return null},e.cookieWrite=function(e,t){var n=new Date;n.setTime(+n+31536e6);var i=location.host.split(".").reverse(),r=" domain=."+i[1]+"."+i[0]+";";-1!==location.host.indexOf(":8000")&&(r=""),doc.cookie=e+"="+t+"; expires="+n.toGMTString()+";"+r+"path=/;"},e.windowBlur=function(){Sled.state.focused&&(Sled.state.focused=!1,Sled.engine&&Sled.state.active?(Analytics.left("left"),Sled.Autoplay&&Sled.Autoplay.offScreen()):0===Sled.state.frames?Analytics.left("leftBeforeAd"):Analytics.left("leftAfterAd"))},e.windowFocus=function(){Sled.state.focused||(Sled.state.focused=!0,Sled.engine&&Sled.state.active?(Analytics.returned("returned"),Sled.Autoplay&&Sled.Autoplay.onScreen()):0===Sled.state.frames?Analytics.returned("returnedBeforeAd"):Analytics.returned("returnedAfterAd"))}}("undefined"==typeof exports?this.Utils={}:exports);var Utils=Sled.Utils=this.Utils;!function SettingsParser(exports){exports.init=function(Utils,errorFunction){return exports.parseURL=function(e,t){var n=e.split("?"),i={};return n.length<=1||n[1].length<=1?errorFunction(new Utils.SledError("SettingsParserError","noSettingsInURL")):n.length>2?errorFunction(new Utils.SledError("SettingsParserError","invalidSettingsEncoding")):i=exports.parseSettings(JSON.parse('{"'+n[1].replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),t),i},exports.parseSettings=function(e,t){var n=[];for(var i in e){var r=e[i];try{var o=decodeURIComponent(r);if(!t)for(;o!==r;)r=o,o=decodeURIComponent(o);e[i]=exports.formatSetting(i,o,t)}catch(a){t||"object"==typeof e[i]||(n.push(new Utils.SledError("SettingsParserError",i+":"+e[i])),e[i]=null)}}for(var s=0,l=n.length;l>s;s++)errorFunction(n[s],e);return e},exports.formatSetting=function(key,value,generating){if("user"===key||"session"===key||"tagID"===key)return value;if("true"===value||value===!0)return!0;if("false"===value||value===!1)return!1;if(!isNaN(value))return+value;if(value.constructor===Array||"["===value.slice(0,1)&&"]"===value.slice(-1))return eval(value);if("object"!=typeof value&&-1!==value.indexOf(",")){for(var array=value.replace(/"/g,"").replace(/'/g,"").split(","),i=0,l=array.length;l>i;i++){var item=array[i];"true"===item?item=!0:"false"===item?item=!1:isNaN(item)||(item=+item)}return array}return value},exports.applyDefaults=function(e){return e.SWIPE_THRESHOLD=e.SWIPE_THRESHOLD||.15,e.SPEED_ALPHA=e.SPEED_ALPHA||190,e.SPEED_BETA=e.SPEED_BETA||90,e.SCROLL_SPEED_MAX=e.SCROLL_SPEED_MAX||.8,e.SCROLL_SPEED_MIN=.1,e.FRAME_DELTA_T_MAX=60,e.FRICTION=e.FRICTION||.886,e.ENTRY_MULTIPLIER=e.ENTRY_MULTIPLIER||1.6,e.ENTRY_MAX_SPEED=e.ENTRY_MAX_SPEED||e.SCROLL_SPEED_MAX,e.scrollElement=e.scrollElement&&doc.querySelector(e.scrollElement)||doc.body,e.embedElement=e.embedElement&&doc.querySelector(e.embedElement)||!1,e.minPosition=e.embedElement?0:e.minPosition||1e3,e.multiview=e.multiview||!1,e.bottomPersistence=e.bottomPersistence||!1,e.offsetBottom=e.offsetBottom||0,e.offsetTop=e.offsetTop||0,e.overscroll=e.embedElement?0:e.overscroll||1,e.autoplayViewPercent=e.autoplayViewPercent||50,e},exports}}("undefined"==typeof exports?this.SettingsParser={}:exports);var errors=[],SettingsParser=this.SettingsParser.init(Utils,function(e){errors.push(e)}),state=Sled.state,settings;Sled.settings=settings=SettingsParser.applyDefaults(SettingsParser.parseSettings(settings)),0===settings.tagID&&console.log("Sled running off default tag"),settings.sledbeat=settings.sledbeat||settings.isATest||Math.random()<.01,settings.pixels=settings.pixels||{},function(e){e.init=function(t){function n(e,n,i,r){var o=new XMLHttpRequest;o.open(e,n,!0),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)r&&r(null,o.responseText);else{var e="sledmobile.com"!==n.substring(9,23),i=new t.SledError("NetworkError",o.status+":"+n,{alert:e});r&&r(i)}},o.send(i)}return e.fetchData=function(e,t){n("GET",e,null,t)},e.post=function(e,t,i){n("POST",e,t,i)},e.fetchImage=function(e,n){var i=new Image;n&&i.addEventListener("load",function(){n(null,i)},!1),i.addEventListener("error",function(){var i=new t.SledError("NetworkError","failedImg:"+e);n&&n(i)},!1),i.src=e},e.firePixel=function(e){var t=new Image;t.src=e},e.firePixels=function(n){function i(t,n){t||(console.log(n),settings.fireExternalPixels&&e.firePixel(n))}n=[].concat(n);for(var r=0,o=n.length;o>r;r++)t.replaceMacros(n[r],n[r],i)},e}}("undefined"==typeof exports?this.Network={}:exports),function(e){e.init=function(t,n,i,r,o){function a(){e.interaction()}function s(e){var t,a,s="?";o.moatMaxT=Math.max(o.moatMaxT,o.moatViewableFunction());var l={time:c(),time50:o.viewable50,time100:o.viewable100,timeMoat:o.moatMaxT,timeOnPage:Date.now()-g+v,sequence:y++,session:r.session,user:r.user,u_gif:r.pseudoUser||null,tagID:r.tagID,campaign:r.campaign,publisher:o.host,page:o.page,referrer:o.referrer,title:o.title,screenWidth:o.viewWidth,screenHeight:o.viewHeight,isPortrait:o.viewWidth<o.viewHeight,language:o.language,loadSpeed:o.loadSpeed||"",initSpeed:o.initSpeed||"",scrollPosition:i.getScrollPosition(),engVer:r.engVersion,tagCount:o.tagCount,gestures:o.gestures,placement:r.placement,externalID:r.extID};if(null!=r.experimentID&&null!=r.experimentGroup&&(l.experimentID=r.experimentID,l.experimentGroup=r.experimentGroup),n.ad&&(l.ad=n.ad.id,l.adVer=n.ad.version,l.timesAdSeen=o.timesAdSeen||0,l.timesSledSeen=o.timesSledSeen||0,n.ad.state&&(l.percentSeen=n.ad.state.percentSeen)),o.active&&(l.viewPct=o.percentInView,l.frameSpeed=~~(o.frameT/o.frames),l.timeStopped=n.ad.state.timeStopped),r.isATest&&(l.testing=!0),e)for(t=0,a=Object.keys(e);t<a.length;t++)l[a[t]]=encodeURIComponent(e[a[t]]);for(t=0,a=Object.keys(l);t<a.length;t++)"undefined"!=typeof l[a[t]]&&(s+=a[t]+"="+l[a[t]]+"&");return s.slice(0,-1)}function l(){f=!1}function d(){U&&e.videoEnd()}function c(){return o.active?Date.now()-m+S:S}function u(){C||(m=Date.now(),g=Date.now(),C=setInterval(function(){e.viewProgress()},b))}function p(){clearInterval(C),C=null}var f,m=(window.top,Date.now()),g=window.performance&&window.performance.timing?window.performance.timing.domInteractive:r.t||Date.now(),S=0,v=0,w=!1,h=!1,E=!1,y=1,x=0,T=0,L=0,I="",A=null,P=-1,b=r.beatSpeed||1e3,C=null,U=null,R=setTimeout(l,D),D=5*b;return e.generic=function(e,n){setTimeout(function(){console.log("Analytics - "+e,n&&n.description?n.description:"","@t="+c()+" @t50%="+o.viewable50+" @moatT="+o.moatViewableFunction()+" @pgT="+(Date.now()-g+v)),t.firePixel(r.analyticsURL+"/track/"+e+s(n))},0)},e.interaction=function(){f||(f=!0,u()),clearTimeout(R),R=setTimeout(l,D)},e.notReady=function(){E||(E=!0,e.generic("notReady"))},e.error=function(t,n){return n=n||{},n.description=t.message,e.generic("ERR:"+encodeURIComponent(t.name),n)},e.onScreen=function(){!w&&o.active&&(w=!0,h||(h=!0,e.generic("impression"),i.cookieWrite("sledImp"+n.ad.id,o.timesAdSeen+1),i.cookieWrite("sledImpTotal",o.timesSledSeen+1),n.plugins.onImpression&&n.plugins.onImpression({ad:n.ad.html,Analytics:Analytics}),n.external.onImpression&&n.external.onImpression(),r.pixels.onImpression&&t.firePixels(r.pixels.onImpression),r.onImpression&&t.firePixels(r.onImpression),r.onPanelView&&r.onPanelView[0]&&(t.firePixels(r.onPanelView[0]),r.alwaysFireOnSwipe||(r.onPanelView[0]=0))),m=Date.now(),e.generic("viewStart"))},e.left=function(t){l(),e.offScreen("defocused"),e.generic(t)},e.returned=function(t){m=Date.now(),g=Date.now(),e.interaction(),e.onScreen(),e.generic(t)},e.floating=function(){return e.generic("floating-"+ ++x),x},e.impression50=function(){e.generic("impression50"),r.onImpression50&&t.firePixels(r.onImpression50),r.pixels.onImpression50&&t.firePixels(r.pixels.onImpression50),n.plugins.onImpression50&&n.plugins.onImpression50(),e.impression50=null},e.impression100=function(){e.generic("impression100"),n.plugins.onFullView&&n.plugins.onFullView({ad:n.ad.html,Analytics:Analytics}),e.impression100=null},e.impressionMRC=function(){e.generic("impressionMRC"),n.plugins.onImpressionMRC&&n.plugins.onImpressionMRC(),r.onImpressionMRC&&t.firePixels(r.onImpressionMRC),e.impressionMRC=null},e.offScreen=function(t){w&&(w=!1,e.generic("viewHeartbeat"),e.generic("viewEnd",{description:t}),d(),S+=Math.min(Date.now()-m,b),m=Date.now())},e.viewProgress=function(){f||p();var t=Math.min(Date.now()-g,b);v+=t,g=Date.now(),o.active&&w?(S+=Math.min(Date.now()-m,b),m=Date.now(),e.generic("viewHeartbeat")):r.sledbeat&&~~(v/1e3)%5===0&&e.generic("viewHeartbeat")},e.swipe=function(n){T+=1,r.onSwipe&&(1===T||r.alwaysFireOnSwipe)&&t.firePixels(r.onSwipe),r.onPanelView&&r.onPanelView[n-1]&&(t.firePixels(r.onPanelView[n-1]),r.alwaysFireOnSwipe||(r.onPanelView[n-1]=0)),e.interaction(),e.generic("swipe-"+n,{counter:T})},e.click=function(t){e.interaction(),e.generic("tap-"+t,{clickX:~~(n.engine.Gesture.relTouch[0]/n.ad.width*100),clickY:~~(n.engine.Gesture.relTouch[1]/n.ad.height*100)})},e.cta=function(a,l,d,c){o.hasClicked=!0,i.replaceMacros(l,"cta",function(o,u){if(o)return c(o);r.pixels&&r.pixels.onClick&&i.replaceMacros(r.pixels.onClick,"cta-pixel",function(n,i){return n?void e.error(n):void t.firePixels(i)});var p={clickX:~~(n.engine.Gesture.relTouch[0]/n.ad.width*100),clickY:~~(n.engine.Gesture.relTouch[1]/n.ad.height*100),target:u,cb:Math.floor(1e13*Math.random())};l=r.analyticsURL+"/redirect/click-"+a+s(p),r.onClick&&!d&&(l=r.onClick+encodeURIComponent(l)),c(null,l)})},e.video=function(t){var n=A.currentTime,i=isNaN(A.duration)?0:~~(100*n/A.duration);e.quartile(Math.floor(i/25)),e.generic(t,{videoTime:Math.round(1e3*n),videoPct:i,counter:L})},e.videoStart=function(t){I!==t&&(I=t,L+=1,A=doc.getElementById(I).getElementsByClassName("sled_video")[0],e.video("videoStart-"+I));var n=e;setTimeout(function(){n.videoProgress()},1e3),U=setInterval(function(){n.videoProgress()},b)},e.videoProgress=function(){e.video("videoHeartbeat-"+I)},e.videoEnd=function(){clearTimeout(U),U=null,e.videoProgress(),e.video("videoEnd-"+I)},e.quartile=function(i){i!==P&&(n.plugins.onVideoQuartile&&n.plugins.onVideoQuartile({quartile:i}),P=i,e.generic("videoQuartile-"+i),0===i&&r.pixels.start?t.firePixels(r.pixels.start):1===i&&r.pixels.firstQuartile?t.firePixels(r.pixels.firstQuartile):2===i&&r.pixels.midpoint?t.firePixels(r.pixels.midpoint):3===i&&r.pixels.thirdQuartile?t.firePixels(r.pixels.thirdQuartile):4===i&&r.pixels.complete&&t.firePixels(r.pixels.complete))},e.dismiss=function(t){w&&(e.generic("impressionEnd",{viewPct:n.ad.state.percentSeen,description:t}),e.offScreen(t))},e.fatal=function(n){e.generic("fatal",{description:n.message}),r.pixels&&r.pixels.onInitializationFailure&&t.firePixels(r.pixels.onInitializationFailure)},e.destroy=function(){clearTimeout(l),d(),p()},a(),e}}("undefined"==typeof exports?this.Analytics={}:exports),function(e){e.init=function(t,n,i){function r(r,l,d,c){try{var u=r.getElementsByTagName("VASTAdTagURI")[0];if(u){if(!r.getElementsByTagName("TrackingEvents")[0]||!r.getElementsByTagName("Impression")[0])throw new i.SledError("VastParserError","vastWrapperMissingTracking")}else if(!r.getElementsByTagName("TrackingEvents")[0]||!r.getElementsByTagName("ClickThrough")[0]||!r.getElementsByTagName("Impression")[0])throw 0===r.getElementsByTagName("InLine").length?new i.SledError("VastParserError","vastBlank"):new i.SledError("VastParserError","vastInlineMissingTracking");var p,f,m,g,S=r.getElementsByTagName("TrackingEvents")[0].childNodes,v=r.getElementsByTagName("ClickTracking"),w=r.getElementsByTagName("Impression");if(l.pixels=l.pixels||{},!u){l.extCTA=a(r.getElementsByTagName("ClickThrough")[0]);var h=r.getElementsByTagName("Creative")[0].id||o(r.getElementsByTagName("Creative")[0],"AdID")||void 0,E=r.id||void 0;switch(d.id){case 18:case 19:case 20:case 21:h=o(r.getElementsByTagName("Creative")[0],"AdID")||void 0,E=E.toString().split(".")[0]}if(l.extID=E+"-"+h,!E&&!h)throw new i.SledError("VastParserError","vastNoID");var y=r.getElementsByTagName("MediaFile");for(p=0,f=y.length;f>p;p++)if(g=a(y[p]),g&&(-1!==o(y[p],"type").indexOf("mp4")||-1!==g.indexOf(".mp4"))){l.extSRC=g;break}if(!l.extSRC)throw new i.SledError("VastParserError","vastNoMp4Media");var x=a(r.getElementsByTagName("Duration")[0]);x&&(x=x.split(":"),l.autoplayLength=60*+x[0]*60+60*+x[1]+ +x[2])}for(p=0,f=S.length;f>p;p++){var T=S[p];if("Tracking"===T.nodeName){if(m=T.attributes[0]?T.attributes[0].nodeValue:null,g=a(T),!m||!g)continue;"creativeView"===m&&(m="onImpression"),l.pixels[m]=[].concat(l.pixels[m]||[]).concat(g)}}if(v)for(p=0,f=v.length;f>p;p++)g=a(v[p]),g&&(l.pixels.onClick=[].concat(l.pixels.onClick||[]).concat(g));var L=a(r.getElementsByTagName("Error")[0]);L&&(l.pixels.onInitializationFailure=[].concat(l.pixels.onInitializationFailure||[]).concat(L));var I=r.getElementsByTagName("CustomTracking")[0];if(I)for(I=I.childNodes,p=0,f=I.length;f>p;p++)if("Tracking"===I[p].nodeName){if(m=I[p].attributes[0].nodeValue,g=a(I[p]),!m||!g)continue;if("viewable_impression"!==m)continue;m="twoSecondsPlayed";var A=/[\u8629]/g;g=g.replace(A,"").trim(),l.pixels[m]=[].concat(l.pixels[m]||[]).concat(g)}for(l.pixels.onImpression50=[].concat(l.pixels.onImpression50||[]),p=0,f=w.length;f>p;p++)g=a(w[p]),g&&(l.vastFastImp?n.firePixel(g):l.pixels.onImpression50.push(g));if(u){console.log("Processing wrapper");var P=u.childNodes[0].wholeText.replace(/[\u8629]/g,"").trim();i.replaceMacros(P,"vastUrl",function(t,r){if(t)throw t;n.fetchData(r,function(t,n){if(t)throw t;i.parseXml(n,function(t,n){if(t)throw t;e.process(n,l,d,c,{nested:!0})})})})}else t.generic("vastLoaded"),c(null,l)}catch(b){s(b,l,c)}}function o(e,t){return e&&e.attributes[t]?e.attributes[t].nodeValue:null}function a(e){return e&&e.firstChild?e.firstChild.nodeValue:null}function s(e,t,n){t.pixels={},e.name="VastParserError",n(e)}return e.process=function(e,t,n,o,a){try{var l=e.getElementsByTagName("Ad");if(0===l.length)throw new i.SledError("VastParserError","vastBlank"+(a&&a.nested?"Nested":""));for(var d=[],c=0,u=l.length;u>c;c++)d.push(l[c]);i.waterfall(d,function(e,i){r(e,t,n,i)},3e3,o)}catch(p){s(p,t,o)}},e}}("undefined"==typeof exports?this.Vast={}:exports),function(e){var t,n=12e3,i=window.top,r=i.document,o=!1;e.init=function(a,s,l){function d(n,i){Sled.ad&&Sled.ad.wrapper&&(Sled.ad.wrapper.remove(),console.log("Removed old wrapper")),Sled.plugins&&Sled.plugins.unload&&Sled.plugins.unload(),Sled.plugins={},t.extAssetURL=null,Sled.ad=n,n.version=e.abVersion(n.version),v(),o=!1,s.async([u,c,v,[p,f,m],g,m,S],function(e,t){return e?(e.name="WaterfallError",i(e)):(Sled.adJSLoaded=null,Sled.adJSFailed=null,void i(null,Sled.ad))})}function c(e){function n(e){Sled.plugins.load?Sled.plugins.load({Network:a,Analytics:Sled.Analytics,adSettings:Sled.ad}):(console.log("Ad.JS lacks .load plugin, assuming valid"),Sled.adJSLoaded())}Sled.adJSLoaded=function(){e(null,Sled.ad),Sled.adJSFailed=function(){},Sled.adJSLoaded=function(){}},Sled.adJSFailed=function(){e(new s.SledError("LoadError","adJsReportsFailure")),Sled.adJSFailed=function(){},Sled.adJSLoaded=function(){}};var i=r.createElement("script");i.type="text/javascript",i.id="sledJS",i.onload=function(){n()},i.onerror=function(){e(new s.SledError("LoadError","failedToLoadJs"))},i.src="ad/ad.js"+(t.isATest?"?cb="+~~(1e8*Math.random()):""),r.head.appendChild(i)}function u(e){if("vast"===Sled.ad.format){if(!Sled.ad.extData&&!Sled.ad.vast)return e(new s.SledError("LoadError","vastNotDefined"));s.replaceMacros(Sled.ad.extData||Sled.ad.vast,"vastUrl",function(n,i){return n?e(n):(Sled.Analytics.generic("vastRequested"),void a.fetchData(i,function(n,i){return n?e(n):void s.parseXml(i,function(n,r){return n?e(n):(t.debug&&r.getElementsByTagName("Ad").length>0&&a.post(t.videoServer+"/xml/"+t.campaign+"/"+Sled.ad.id,i),void l.process(r,t,Sled.ad,e))})}))})}else e()}function p(e){function n(){e()}var i=r.createElement("link");i.rel="stylesheet",i.id="sledCSS",i.onload=n,i.onerror=function(){e(new s.SledError("LoadError","failedToLoadCss"))},i.href=Sled.ad.assetURL+"ad.css"+(t.isATest?"?callback="+~~(1e8*Math.random()):""),r.head.appendChild(i),t.androidStock&&setTimeout(n,200)}function f(e){Sled.ad.wrapper=r.getElementById("sled_ad_wrapper"),Sled.ad.wrapper?e():a.fetchData(Sled.ad.assetURL+"ad.html"+(t.isATest?"?callback="+~~(1e8*Math.random()):""),function(t,n){return t?e(new s.SledError("LoadError","failedToLoadHtml")):(Sled.ad.html=n,void e())})}function m(e){function n(n,i){return n?("vast"===Sled.ad.format&&(a.firePixel(t.videoServer+"/transcode?id="+t.extID+"&server="+t.server+"&url="+encodeURIComponent(t.extSRC)),Sled.Analytics.generic("transcodeRequest-"+t.extID)),e(new s.SledError("LoadError","vastTranscoding"))):void e()}function l(e){if(e(),Sled.ad&&!Sled.ad.autoplayPreview){var n=i.AudioContext||i.webkitAudioContext||i.mozAudioContext||i.oAudioContext||i.msAudioContext;if(Sled.ad.audioContext=n?new n:null,Sled.ad.audioContext){var o=new XMLHttpRequest;o.open("GET",t.extAssetURL+"autoplay.mp3",!0),o.responseType="arraybuffer",o.onload=function(){return null==Sled.ad||null==Sled.ad.audioContext?void console.log("Failed to find Sled ad or audio context, sound disabled"):void Sled.ad.audioContext.decodeAudioData(o.response,function(e){Sled.ad.audioBuffer=e;var t=r.getElementById("sled_autoplay_sound");t&&(t.style.display="block")},console.log)},o.send()}}}o||"vast"!==Sled.ad.format&&!r.getElementById("sled_autoplay")?e():(o=!0,s.async([[function(e){a.fetchImage(t.extAssetURL+"autoplay0.jpg",e,function(){e(new s.SledError("LoadError","failedToLoadPoster"))})},function(e){a.fetchImage(t.extAssetURL+"autoplay1.jpg",e,function(){e(new s.SledError("LoadError","failedToLoadFrame1"))})}],l],n))}function g(e){var n=Sled.ad;if(Sled.plugins.onBeforeLoad&&Sled.plugins.onBeforeLoad({ad:n,Network:a,Analytics:Analytics}),n.wrapper)e();else{var i=r.createDocumentFragment();n.wrapper=r.createElement("div"),n.wrapper.id="sled_ad_wrapper",n.wrapper.innerHTML=n.html,i.appendChild(n.wrapper);var o=Sled.Utils.random+n.id;if(t.doubleVerify){var s=i.getElementById("sled_ad").innerHTML,l="<span class='sled_doubleVerify_wrapper' id='"+o+"' adunit='1'>"+s+"</span>";i.getElementById("sled_ad").innerHTML=l;var d=r.createElement("script");d.id="sled_doubleVerify_tag",d.src="https://cdn.doubleverify.com/dvtp_src.js?ctx=2397394&cmp=8986369&sid=1688159&plc=121513734&num=&adid=&advid=2397395&adsrv=1&region=30&btreg="+o+"&btadsrv=&crt=&crtname=&chnl=&unit=&pid=&uid=&tagtype=&dvtagver=6.1.src",i.appendChild(d)}if(t.moat)if(t.metadata&&t.metadata.advertiser){window.SledMoatListener=function(e){console.log("MOAT event triggered, timing function received"),state.moatViewableFunction=e.getInViewTime};var c=r.createElement("script"),u="";c.id="sled_moat_tag",u="http://js.moatads.com/sledmobile193334213423/moatad.js#moatClientLevel1="+encodeURIComponent(t.metadata.advertiser)+"&moatClientLevel2="+encodeURIComponent(t.campaign)+"&moatClientLevel3="+encodeURIComponent(n.version)+"&moatClientLevel4="+encodeURIComponent(t.tagID)+"&moatClientSlicer1="+encodeURIComponent(state.host),t.placement&&(u+="&moatClientSlicer2="+encodeURIComponent(t.placement)),c.src=u,r.head.appendChild(c)}else Analytics.error({name:"MetadataError",message:"moatMissingMetadata"});t.embedElement?(n.wrapper.classList.add("sled_no_scroll"),t.embedElement.appendChild(i),t.minPosition=t.embedElement.offsetTop-200):r.body.appendChild(i),e()}}function S(e){return Sled.ad.html?(Sled.ad.html=r.getElementById("sled_ad"),Sled.ad.style=Sled.ad.html.style,Sled.ad.width=Sled.ad.html.clientWidth,void e()):e(new s.SledError("LoadError","failedToInsertAd"))}function v(e){var n=t.sledURL+"/";switch(Sled.ad.format){case"vast":n+="vast","localhost"===t.server?(t.videoServer="http://localhost:8001",t.extAssetURL=t.sledURL):"qa"===t.server?(t.videoServer="http://betavideo.sledmobile.com",t.extAssetURL="http://qa.sledmobile.com"):(t.videoServer="http://video.a47b.com",t.extAssetURL="http://a47b.com"),t.extAssetURL+="/vast/"+t.extID+"/"+t.qualityLevel+"/";break;default:n+=t.assetURL||Sled.ad.id}t.extAssetURL=t.extAssetURL||t.sledURL+"/"+(t.assetURL||Sled.ad.id)+"/"+t.qualityLevel+"/"+Sled.ad.version+"/",n+="/"+t.qualityLevel+"/"+Sled.ad.version+"/",Sled.ad.assetURL=n,Sled.ad.assetURL="ad/",e&&e(null,n)}return e.waterfall=function(e,i,r){t=i,s.waterfall(e,d,n,r)},e.abVersion=function(e){if("object"==typeof e){var t=Math.random(),n=0;for(var i in e)if(e.hasOwnProperty(i)&&(n+=e[i],n>=t))return i;return 1}return e},e}}("undefined"==typeof exports?this.Loader={}:exports);var Network=Sled.Network=this.Network.init(Utils),Analytics=Sled.Analytics=this.Analytics.init(Network,Sled,Utils,settings,state),Vast=this.Vast.init(Analytics,Network,Utils),Loader=this.Loader.init(Network,Utils,Vast);console.log("Loading Sled v"+Sled.settings.engVersion),state.initSpeed=Date.now()-settings.t,console.log("Sled.js loaded in: "+state.initSpeed+"ms"),Analytics.generic("pageLoaded");for(var i=0,l=errors.length;l>i;i++)Analytics.error(errors[i]);Utils.cookieRead("sledUserID")||Utils.cookieWrite("sledUserID",settings.user);var adserver="http://tags.a47b.com";"qa"===settings.server?adserver="http://beta.tags.sledmobile.com":"localhost"===settings.server&&(adserver="http://localhost:8888"),Network.fetchData(adserver+"/u.gif",function(e,t){t=JSON.parse(t),settings.pseudoUser=t.u});var iframe=document.createElement("IFRAME");iframe.src="http://a47b.com/u3.html?user="+settings.user+"&isATest="+settings.isATest+"&analyticsURL="+encodeURIComponent(settings.analyticsURL),iframe.style.width="0px",iframe.style.height="0px",doc.body.appendChild(iframe),settings.android=/android/i.test(navigator.userAgent);var rxaosp=navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/),chromeVersion=navigator.userAgent.match(/Chrome\/([\d.]+)/);if(settings.androidStock=settings.android&&(rxaosp&&rxaosp[1]<537||chromeVersion&&+chromeVersion[1].slice(0,4)<34),settings.ios=/iphone|ipad|ipod/i.test(navigator.userAgent),settings.ios7=/(iPad|iPhone|iPod touch);.*CPU.*OS 7_\d/i.test(navigator.userAgent),settings.mobile=settings.android||settings.ios,!settings.allDevices){if(!settings.mobile)throw new Utils.SledError("EnforcerError","browser");if(settings.androidStock)throw new Utils.SledError("EnforcerError","browserAndroidStock");if(!settings.isATest&&win.innerWidth>767)throw new Utils.SledError("EnforcerError","screenTooBig");if(!settings.isATest&&win.innerHeight<win.innerWidth)throw new Utils.SledError("EnforcerError","isLandscape")}if(settings.rateLimit){var timestamp=Utils.cookieRead("sledViewTimestamp");if(settings.timesSledSeenSinceLimited=Utils.cookieRead("sledImpTotal"),timestamp?Date.now()-timestamp>864e5&&(settings.timesSledSeenSinceLimited=0,Utils.cookieWrite("sledImpTotal",settings.timesSledSeenSinceLimited),Utils.cookieWrite("sledViewTimestamp",Date.now())):(timestamp=Date.now(),Utils.cookieWrite("sledViewTimestamp",timestamp)),settings.timesSledSeenSinceLimited>=settings.rateLimit)throw new Utils.SledError("EnforcerError","rateLimited")}settings.onPageLoad&&Network.firePixels(settings.onPageLoad),state.loadSpeed<500?settings.qualityLevel="high":state.loadSpeed<800?settings.qualityLevel="med":settings.qualityLevel="low",Utils.async([[loadEngine,loadWaterfall]],function(e,t){return e?(e.name="LoadError",die(e)):void initEngine()}),win.addEventListener("blur",Utils.windowBlur),win.addEventListener("focus",Utils.windowFocus),win.addEventListener("touchstart",function(){state.focused=!0,state.gestures++,Analytics.interaction()}),settings.hideElement&&doc.querySelector(settings.hideElement)&&(doc.querySelector(settings.hideElement).style.display="none")}catch(err){die(err)}}"complete"===document.readyState||"interactive"===document.readyState?new InitSled:document.addEventListener("DOMContentLoaded",function(e){new InitSled});
